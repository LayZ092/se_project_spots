!function(){"use strict";var e="";const t={formSelector:".modal__form",inputSelector:".modal__input",submitButtonSelector:".modal__save-btn",inactiveButtonClass:"modal__save-btn_disabled",inputErrorClass:"modal__input_type_error",errorClass:"modal__error"},r=(e,t,r)=>{e.querySelector(`#${t.id}-error`).textContent="",t.classList.remove(r.inputErrorClass)},n=(e,t,r)=>{(e=>e.some((e=>!e.validity.valid)))(e)?o(t,r):(t.classList.remove(r.inactiveButtonClass),t.disabled=!1)},o=(e,t)=>{e.classList.add(t.inactiveButtonClass),e.disabled=!0};var a=e+"8650253b58b46f0f1c06.svg",c=e+"d38272e02bb4f1ab1c37.svg",s=e+"40608da7369d39bc1077.svg";document.querySelector(".header__logo").src=a,document.querySelector(".profile__edit-btn img").src=c,document.querySelector(".profile__add-btn img").src=s;const d=document.querySelector(".profile__edit-btn"),l=document.querySelector(".profile__name"),i=document.querySelector(".profile__description"),u=document.querySelector(".profile__add-btn"),_=document.querySelector("#edit-profile-modal"),m=document.querySelector(".modal__exit-btn"),h=_.querySelector(".modal__form"),v=document.querySelector("#profile-name-input"),f=document.querySelector("#profile-description-input"),y=document.querySelector("#add-card-link-input"),S=document.querySelector("#add-card-name-input"),p=document.querySelector("#edit-avatar-modal"),b=document.querySelector(".profile__edit-picture-btn"),q=p.querySelector(".modal__exit-btn"),k=p.querySelector(".modal__form"),g=p.querySelector("#profile-avatar-input"),C=p.querySelector(".modal__save-btn"),E=document.querySelector("#card-delete-modal"),L=E.querySelector(".modal__form"),x=(document.querySelector(".card__delete-btn"),E.querySelector(".modal__save-btn"),E.querySelector(".modal__exit-btn")),U=E.querySelector(".modal__cancel-btn"),$=document.querySelector("#preview-modal"),R=$.querySelector(".modal__image"),A=$.querySelector(".modal__caption"),D=document.querySelector("#add-card-modal"),I=D.querySelector(".modal__exit-btn"),T=D.querySelector(".modal__form"),w=$.querySelector(".modal__exit-btn"),N=D.querySelector(".modal__save-btn"),P=document.querySelector("#card-template"),B=document.querySelector(".cards__list");let O,j;const J=new class{constructor(e){let{baseUrl:t,headers:r}=e;this._baseUrl=t,this._headers=r}_checkResponse(e){return e.ok?e.json():Promise.reject(`ERROR: ${e.status}`)}getCardsAndUserInfo(){return Promise.all([this.getInitialCards(),this.getUserInfo()])}getInitialCards(){return fetch(`${this._baseUrl}/cards`,{headers:this._headers}).then(this._checkResponse)}getUserInfo(){return fetch(`${this._baseUrl}/users/me`,{headers:this._headers}).then(this._checkResponse)}editUserInfo(e){let{name:t,about:r}=e;return fetch(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:r})}).then(this._checkResponse)}addNewCard(e){let{name:t,link:r}=e;return fetch(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:r})}).then(this._checkResponse)}deleteCard(e){return fetch(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers}).then(this._checkResponse)}editAvatar(e){let{avatar:t}=e;return fetch(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}changeLikeStatus(e,t){return fetch(`${this._baseUrl}/cards/${e}/likes`,{method:t?"DELETE":"PUT",headers:this._headers}).then(this._checkResponse)}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{authorization:"6f4ae429-4ad9-43f6-abd7-d143d087e687","Content-Type":"application/json"}});function H(e){const t=P.content.querySelector(".card").cloneNode(!0),r=t.querySelector(".card__title"),n=t.querySelector(".card__image"),o=t.querySelector(".card__like-btn"),a=t.querySelector(".card__delete-btn");return function(e){return e.isLiked}(e)&&o.classList.add("card__like-btn_liked"),r.textContent=e.name,n.src=e.link,n.alt=e.name,n.addEventListener("click",(()=>{z($),R.src=e.link,R.alt=e.name,A.textContent=e.name})),o.addEventListener("click",(t=>function(e,t,r){const n=t.classList.contains("card__like-btn_liked");J.changeLikeStatus(r,n).then((e=>(t.classList.toggle("card__like-btn_liked"),e.isLiked))).catch((e=>{console.log(e)}))}(0,o,e._id))),a.addEventListener("click",(()=>function(e,t){O=e,j=t,z(E)}(t,e._id))),t}function z(e){e.classList.add("modal_opened"),document.addEventListener("keydown",F)}function M(e){e.classList.remove("modal_opened"),document.removeEventListener("keydown",F)}function F(e){if("Escape"===e.key){const e=document.querySelector(".modal_opened");e&&M(e)}}var G;J.getCardsAndUserInfo().then((e=>{let[t,r]=e;t.forEach((e=>{const t=H(e);B.prepend(t)})),l.textContent=r.name,i.textContent=r.about,document.querySelector(".profile__picture").src=r.avatar})).catch((e=>{console.log(e)})),d.addEventListener("click",(()=>{var e,n;z(_),v.value=l.textContent,f.value=i.textContent,e=_,n=t,[v,f].forEach((t=>{r(e,t,n)}))})),m.addEventListener("click",(()=>{M(_)})),u.addEventListener("click",(()=>{z(D)})),I.addEventListener("click",(()=>{M(D)})),w.addEventListener("click",(()=>{M($)})),b.addEventListener("click",(()=>{z(p)})),q.addEventListener("click",(()=>{M(p)})),x.addEventListener("click",(()=>{M(E)})),U.addEventListener("click",(()=>{M(E)})),h.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;r.textContent="Saving...",J.editUserInfo({name:v.value,about:f.value}).then((r=>{l.textContent=r.name,i.textContent=r.about,M(_),e.target.reset(),o(N,t)})).catch((e=>{console.log(e)})).finally((()=>{r.textContent="Save"}))})),T.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;r.textContent="Saving...",J.addNewCard({name:S.value,link:y.value}).then((r=>{const n=H(r);B.prepend(n),M(D),e.target.reset(),o(N,t)})).catch((e=>{console.log(e)})).finally((()=>{r.textContent="Save"}))})),k.addEventListener("submit",(function(e){e.preventDefault();const r=e.submitter;r.textContent="Saving...",J.editAvatar({avatar:g.value}).then((r=>{document.querySelector(".profile__picture").src=r.avatar,M(p),e.target.reset(),o(C,t)})).catch((e=>{console.log(e)})).finally((()=>{r.textContent="Save"}))})),L.addEventListener("submit",(function(e){e.preventDefault();const t=e.submitter;t.textContent="Deleting...",J.deleteCard(j).then((()=>{O.remove(),M(E)})).catch((e=>{console.log(e)})).finally((()=>{t.textContent="Delete"}))})),[_,D,$,E,p].forEach((e=>{e.addEventListener("click",(t=>{t.target.classList.contains("modal")&&M(e)}))})),G=t,document.querySelectorAll(G.formSelector).forEach((e=>{((e,t)=>{const o=Array.from(e.querySelectorAll(t.inputSelector)),a=e.querySelector(t.submitButtonSelector);n(o,a,t),o.forEach((c=>{c.addEventListener("input",(()=>{((e,t,n)=>{t.validity.valid?r(e,t,n):((e,t,r,n)=>{e.querySelector(`#${t.id}-error`).textContent=r,t.classList.add(n.inputErrorClass)})(e,t,t.validationMessage,n)})(e,c,t),n(o,a,t)}))}))})(e,G)}))}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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VixFRjFQRTBCLFNBQVMwSCxpQkFBaUIxSSxFQUFPVCxjQUN6Q3VJLFNBQVNoSSxJQWhCTTZJLEVBQUM3SSxFQUFRRSxLQUNqQyxNQUFNTyxFQUFZcUksTUFBTUMsS0FBSy9JLEVBQU80SSxpQkFBaUIxSSxFQUFPUixnQkFDdERnQixFQUFnQlYsRUFBT0csY0FBY0QsRUFBT1Asc0JBRWxEYSxFQUFrQkMsRUFBV0MsRUFBZVIsR0FFNUNPLEVBQVV1SCxTQUFTL0gsSUFDakJBLEVBQVF5RyxpQkFBaUIsU0FBUyxLQXpDWHNDLEVBQUNoSixFQUFRQyxFQUFTQyxLQUN0Q0QsRUFBUVcsU0FBU0MsTUFHcEJkLEVBQWVDLEVBQVFDLEVBQVNDLEdBaEJiK0ksRUFBQ2pKLEVBQVFDLEVBQVNpSixFQUFjaEosS0FDbENGLEVBQU9HLGNBQWMsSUFBSUYsRUFBUUcsWUFDekNDLFlBQWM2SSxFQUN6QmpKLEVBQVFLLFVBQVVXLElBQUlmLEVBQU9MLGdCQUFnQixFQVczQ29KLENBQWVqSixFQUFRQyxFQUFTQSxFQUFRa0osa0JBQW1CakosRUFHN0QsRUFxQ0k4SSxDQUFtQmhKLEVBQVFDLEVBQVNDLEdBQ3BDTSxFQUFrQkMsRUFBV0MsRUFBZVIsRUFBTyxHQUNuRCxHQUNGLEVBTUEySSxDQUFrQjdJLEVBQVFFLEVBQU8sRyIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3Rfc3BvdHMvd2VicGFjay9ib290c3RyYXAiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9zcG90cy93ZWJwYWNrL3J1bnRpbWUvcHVibGljUGF0aCIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3NjcmlwdHMvdmFsaWRhdGlvbi5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3V0aWxzL0FwaS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X3Nwb3RzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbIi8vIFRoZSByZXF1aXJlIHNjb3BlXG52YXIgX193ZWJwYWNrX3JlcXVpcmVfXyA9IHt9O1xuXG4iLCJfX3dlYnBhY2tfcmVxdWlyZV9fLnAgPSBcIlwiOyIsImV4cG9ydCBjb25zdCBzZXR0aW5ncyA9IHtcclxuICBmb3JtU2VsZWN0b3I6IFwiLm1vZGFsX19mb3JtXCIsXHJcbiAgaW5wdXRTZWxlY3RvcjogXCIubW9kYWxfX2lucHV0XCIsXHJcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLm1vZGFsX19zYXZlLWJ0blwiLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwibW9kYWxfX3NhdmUtYnRuX2Rpc2FibGVkXCIsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiBcIm1vZGFsX19pbnB1dF90eXBlX2Vycm9yXCIsXHJcbiAgZXJyb3JDbGFzczogXCJtb2RhbF9fZXJyb3JcIixcclxufTtcclxuXHJcbmNvbnN0IHNob3dJbnB1dEVycm9yID0gKGZvcm1FbCwgaW5wdXRFbCwgZXJyb3JNZXNzYWdlLCBjb25maWcpID0+IHtcclxuICBjb25zdCBlcnJvck1zZ0VsID0gZm9ybUVsLnF1ZXJ5U2VsZWN0b3IoYCMke2lucHV0RWwuaWR9LWVycm9yYCk7XHJcbiAgZXJyb3JNc2dFbC50ZXh0Q29udGVudCA9IGVycm9yTWVzc2FnZTtcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5hZGQoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBoaWRlSW5wdXRFcnJvciA9IChmb3JtRWwsIGlucHV0RWwsIGNvbmZpZykgPT4ge1xyXG4gIGNvbnN0IGVycm9yTXNnRWwgPSBmb3JtRWwucXVlcnlTZWxlY3RvcihgIyR7aW5wdXRFbC5pZH0tZXJyb3JgKTtcclxuICBlcnJvck1zZ0VsLnRleHRDb250ZW50ID0gXCJcIjtcclxuICBpbnB1dEVsLmNsYXNzTGlzdC5yZW1vdmUoY29uZmlnLmlucHV0RXJyb3JDbGFzcyk7XHJcbn07XHJcblxyXG5jb25zdCBjaGVja0lucHV0VmFsaWRpdHkgPSAoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpID0+IHtcclxuICBpZiAoIWlucHV0RWwudmFsaWRpdHkudmFsaWQpIHtcclxuICAgIHNob3dJbnB1dEVycm9yKGZvcm1FbCwgaW5wdXRFbCwgaW5wdXRFbC52YWxpZGF0aW9uTWVzc2FnZSwgY29uZmlnKTtcclxuICB9IGVsc2Uge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dEVsLCBjb25maWcpO1xyXG4gIH1cclxufTtcclxuXHJcbmNvbnN0IGhhc0ludmFsaWRJbnB1dCA9IChpbnB1dExpc3QpID0+IHtcclxuICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWwpID0+IHtcclxuICAgIHJldHVybiAhaW5wdXRFbC52YWxpZGl0eS52YWxpZDtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHRvZ2dsZUJ1dHRvblN0YXRlID0gKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgaWYgKGhhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpKSB7XHJcbiAgICBkaXNhYmxlQnV0dG9uKGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcbiAgfSBlbHNlIHtcclxuICAgIGJ1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZShjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gZmFsc2U7XHJcbiAgfVxyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGRpc2FibGVCdXR0b24gPSAoYnV0dG9uRWxlbWVudCwgY29uZmlnKSA9PiB7XHJcbiAgYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKGNvbmZpZy5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICBidXR0b25FbGVtZW50LmRpc2FibGVkID0gdHJ1ZTtcclxufTtcclxuXHJcbmV4cG9ydCBjb25zdCByZXNldFZhbGlkYXRpb24gPSAoZm9ybUVsLCBpbnB1dExpc3QsIGNvbmZpZykgPT4ge1xyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dCkgPT4ge1xyXG4gICAgaGlkZUlucHV0RXJyb3IoZm9ybUVsLCBpbnB1dCwgY29uZmlnKTtcclxuICB9KTtcclxufTtcclxuXHJcbmNvbnN0IHNldEV2ZW50TGlzdGVuZXJzID0gKGZvcm1FbCwgY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgaW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWwucXVlcnlTZWxlY3RvckFsbChjb25maWcuaW5wdXRTZWxlY3RvcikpO1xyXG4gIGNvbnN0IGJ1dHRvbkVsZW1lbnQgPSBmb3JtRWwucXVlcnlTZWxlY3Rvcihjb25maWcuc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG5cclxuICB0b2dnbGVCdXR0b25TdGF0ZShpbnB1dExpc3QsIGJ1dHRvbkVsZW1lbnQsIGNvbmZpZyk7XHJcblxyXG4gIGlucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsKSA9PiB7XHJcbiAgICBpbnB1dEVsLmFkZEV2ZW50TGlzdGVuZXIoXCJpbnB1dFwiLCAoKSA9PiB7XHJcbiAgICAgIGNoZWNrSW5wdXRWYWxpZGl0eShmb3JtRWwsIGlucHV0RWwsIGNvbmZpZyk7XHJcbiAgICAgIHRvZ2dsZUJ1dHRvblN0YXRlKGlucHV0TGlzdCwgYnV0dG9uRWxlbWVudCwgY29uZmlnKTtcclxuICAgIH0pO1xyXG4gIH0pO1xyXG59O1xyXG5cclxuZXhwb3J0IGNvbnN0IGVuYWJsZVZhbGlkYXRpb24gPSAoY29uZmlnKSA9PiB7XHJcbiAgY29uc3QgZm9ybUxpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKGNvbmZpZy5mb3JtU2VsZWN0b3IpO1xyXG4gIGZvcm1MaXN0LmZvckVhY2goKGZvcm1FbCkgPT4ge1xyXG4gICAgc2V0RXZlbnRMaXN0ZW5lcnMoZm9ybUVsLCBjb25maWcpO1xyXG4gIH0pO1xyXG59O1xyXG4iLCJjbGFzcyBBcGkge1xyXG4gIGNvbnN0cnVjdG9yKHsgYmFzZVVybCwgaGVhZGVycyB9KSB7XHJcbiAgICB0aGlzLl9iYXNlVXJsID0gYmFzZVVybDtcclxuICAgIHRoaXMuX2hlYWRlcnMgPSBoZWFkZXJzO1xyXG4gIH1cclxuXHJcbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XHJcbiAgICBpZiAocmVzLm9rKSB7XHJcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xyXG4gICAgfVxyXG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBFUlJPUjogJHtyZXMuc3RhdHVzfWApO1xyXG4gIH1cclxuXHJcbiAgZ2V0Q2FyZHNBbmRVc2VySW5mbygpIHtcclxuICAgIHJldHVybiBQcm9taXNlLmFsbChbdGhpcy5nZXRJbml0aWFsQ2FyZHMoKSwgdGhpcy5nZXRVc2VySW5mbygpXSk7XHJcbiAgfVxyXG5cclxuICBnZXRJbml0aWFsQ2FyZHMoKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZ2V0VXNlckluZm8oKSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZWRpdFVzZXJJbmZvKHsgbmFtZSwgYWJvdXQgfSkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgYWJvdXQsXHJcbiAgICAgIH0pLFxyXG4gICAgfSkudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcclxuICB9XHJcblxyXG4gIGFkZE5ld0NhcmQoeyBuYW1lLCBsaW5rIH0pIHtcclxuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcclxuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIG5hbWUsXHJcbiAgICAgICAgbGluayxcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZGVsZXRlQ2FyZChpZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xyXG4gICAgICBtZXRob2Q6IFwiREVMRVRFXCIsXHJcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgZWRpdEF2YXRhcih7IGF2YXRhciB9KSB7XHJcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xyXG4gICAgICBtZXRob2Q6IFwiUEFUQ0hcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgICAgYm9keTogSlNPTi5zdHJpbmdpZnkoe1xyXG4gICAgICAgIGF2YXRhcixcclxuICAgICAgfSksXHJcbiAgICB9KS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xyXG4gIH1cclxuXHJcbiAgY2hhbmdlTGlrZVN0YXR1cyhpZCwgaXNMaWtlZCkge1xyXG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xyXG4gICAgICBtZXRob2Q6IGlzTGlrZWQgPyBcIkRFTEVURVwiIDogXCJQVVRcIixcclxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcclxuICAgIH0pLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XHJcbiAgfVxyXG59XHJcblxyXG5leHBvcnQgZGVmYXVsdCBBcGk7XHJcbiIsImltcG9ydCBcIi4uL3BhZ2VzL2luZGV4LmNzc1wiO1xyXG5pbXBvcnQge1xyXG4gIHNldHRpbmdzLFxyXG4gIGVuYWJsZVZhbGlkYXRpb24sXHJcbiAgcmVzZXRWYWxpZGF0aW9uLFxyXG4gIGRpc2FibGVCdXR0b24sXHJcbn0gZnJvbSBcIi4uL3NjcmlwdHMvdmFsaWRhdGlvbi5qc1wiO1xyXG5pbXBvcnQgQXBpIGZyb20gXCIuLi91dGlscy9BcGkuanNcIjtcclxuXHJcbmltcG9ydCBsb2dvIGZyb20gXCIuLi9pbWFnZXMvbG9nby5zdmdcIjtcclxuaW1wb3J0IGF2YXRhciBmcm9tIFwiLi4vaW1hZ2VzL2F2YXRhci5qcGdcIjtcclxuaW1wb3J0IHBlbmNpbCBmcm9tIFwiLi4vaW1hZ2VzL3BlbmNpbC5zdmdcIjtcclxuaW1wb3J0IHBsdXMgZnJvbSBcIi4uL2ltYWdlcy9wbHVzLnN2Z1wiO1xyXG5cclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5oZWFkZXJfX2xvZ29cIikuc3JjID0gbG9nbztcclxuZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19lZGl0LWJ0biBpbWdcIikuc3JjID0gcGVuY2lsO1xyXG5kb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2FkZC1idG4gaW1nXCIpLnNyYyA9IHBsdXM7XHJcblxyXG5jb25zdCBwcm9maWxlRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idG5cIik7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19uYW1lXCIpO1xyXG5jb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCIpO1xyXG5jb25zdCBjYXJkQWRkQnV0dG9uID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hZGQtYnRuXCIpO1xyXG5cclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjZWRpdC1wcm9maWxlLW1vZGFsXCIpO1xyXG5jb25zdCBwcm9maWxlRXhpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXQtYnRuXCIpO1xyXG5jb25zdCBlZGl0Rm9ybUVsZW1lbnQgPSBlZGl0UHJvZmlsZU1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGVkaXRQcm9maWxlTW9kYWxOYW1lSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3Byb2ZpbGUtbmFtZS1pbnB1dFwiKTtcclxuY29uc3QgZWRpdFByb2ZpbGVNb2RhbERlc2NyaXB0aW9uSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFxyXG4gIFwiI3Byb2ZpbGUtZGVzY3JpcHRpb24taW5wdXRcIlxyXG4pO1xyXG5jb25zdCBjYXJkTW9kYWxMaW5rSW5wdXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2FkZC1jYXJkLWxpbmstaW5wdXRcIik7XHJcbmNvbnN0IGNhcmRNb2RhbE5hbWVJbnB1dCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbmFtZS1pbnB1dFwiKTtcclxuXHJcbmNvbnN0IGF2YXRhck1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNlZGl0LWF2YXRhci1tb2RhbFwiKTtcclxuY29uc3QgYXZhdGFyRWRpdEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1waWN0dXJlLWJ0blwiKTtcclxuY29uc3QgYXZhdGFyRXhpdEJ1dHRvbiA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXQtYnRuXCIpO1xyXG5jb25zdCBhdmF0YXJGb3JtRWxlbWVudCA9IGF2YXRhck1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2Zvcm1cIik7XHJcbmNvbnN0IGF2YXRhcklucHV0ID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIiNwcm9maWxlLWF2YXRhci1pbnB1dFwiKTtcclxuY29uc3QgYXZhdGFyU3VibWl0QnRuID0gYXZhdGFyTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fc2F2ZS1idG5cIik7XHJcblxyXG5jb25zdCBkZWxldGVDYXJkTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI2NhcmQtZGVsZXRlLW1vZGFsXCIpO1xyXG5jb25zdCBkZWxldGVDYXJkRm9ybUVsZW1lbnQgPSBkZWxldGVDYXJkTW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fZm9ybVwiKTtcclxuY29uc3QgZGVsZXRlQ2FyZEJ1dHRvbiA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fZGVsZXRlLWJ0blwiKTtcclxuY29uc3QgZGVsZXRlQ2FyZFN1Ym1pdEJ1dHRvbiA9XHJcbiAgZGVsZXRlQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX3NhdmUtYnRuXCIpO1xyXG5jb25zdCBkZWxldGVDYXJkRXhpdEJ1dHRvbiA9IGRlbGV0ZUNhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19leGl0LWJ0blwiKTtcclxuY29uc3QgZGVsZXRlQ2FyZENhbmNlbEJ1dHRvbiA9XHJcbiAgZGVsZXRlQ2FyZE1vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhbmNlbC1idG5cIik7XHJcblxyXG5jb25zdCBwcmV2aWV3TW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI3ByZXZpZXctbW9kYWxcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbEltYWdlRWwgPSBwcmV2aWV3TW9kYWwucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9faW1hZ2VcIik7XHJcbmNvbnN0IHByZXZpZXdNb2RhbENhcHRpb25FbCA9IHByZXZpZXdNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19jYXB0aW9uXCIpO1xyXG5cclxuY29uc3QgZWRpdENhcmRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjYWRkLWNhcmQtbW9kYWxcIik7XHJcbmNvbnN0IGNhcmRFeGl0QnV0dG9uID0gZWRpdENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19leGl0LWJ0blwiKTtcclxuY29uc3QgY2FyZEZvcm1FbGVtZW50ID0gZWRpdENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19mb3JtXCIpO1xyXG5jb25zdCBwcmV2aWV3TW9kYWxFeGl0QnV0dG9uID0gcHJldmlld01vZGFsLnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2V4aXQtYnRuXCIpO1xyXG5jb25zdCBjYXJkU3VibWl0QnRuID0gZWRpdENhcmRNb2RhbC5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19zYXZlLWJ0blwiKTtcclxuXHJcbmNvbnN0IGNhcmRUZW1wbGF0ZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIjY2FyZC10ZW1wbGF0ZVwiKTtcclxuY29uc3QgY2FyZHNMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkc19fbGlzdFwiKTtcclxuXHJcbmxldCBzZWxlY3RlZENhcmQsIHNlbGVjdGVkQ2FyZElkO1xyXG5cclxuY29uc3QgYXBpID0gbmV3IEFwaSh7XHJcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxyXG4gIGhlYWRlcnM6IHtcclxuICAgIGF1dGhvcml6YXRpb246IFwiNmY0YWU0MjktNGFkOS00M2Y2LWFiZDctZDE0M2QwODdlNjg3XCIsXHJcbiAgICBcIkNvbnRlbnQtVHlwZVwiOiBcImFwcGxpY2F0aW9uL2pzb25cIixcclxuICB9LFxyXG59KTtcclxuXHJcbmFwaVxyXG4gIC5nZXRDYXJkc0FuZFVzZXJJbmZvKClcclxuICAudGhlbigoW2NhcmRzLCB1c2VySW5mb10pID0+IHtcclxuICAgIGNhcmRzLmZvckVhY2goKGl0ZW0pID0+IHtcclxuICAgICAgY29uc3QgY2FyZEVsZW1lbnQgPSBnZXRDYXJkRWxlbWVudChpdGVtKTtcclxuICAgICAgY2FyZHNMaXN0LnByZXBlbmQoY2FyZEVsZW1lbnQpO1xyXG4gICAgfSk7XHJcblxyXG4gICAgcHJvZmlsZU5hbWUudGV4dENvbnRlbnQgPSB1c2VySW5mby5uYW1lO1xyXG4gICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gdXNlckluZm8uYWJvdXQ7XHJcbiAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIikuc3JjID0gdXNlckluZm8uYXZhdGFyO1xyXG4gIH0pXHJcbiAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgfSk7XHJcblxyXG5mdW5jdGlvbiBnZXRDYXJkRWxlbWVudChkYXRhKSB7XHJcbiAgY29uc3QgY2FyZEVsZW1lbnQgPSBjYXJkVGVtcGxhdGUuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxyXG4gICAgLmNsb25lTm9kZSh0cnVlKTtcclxuXHJcbiAgY29uc3QgY2FyZE5hbWVFbCA9IGNhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fdGl0bGVcIik7XHJcbiAgY29uc3QgY2FyZEltYWdlRWwgPSBjYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpO1xyXG4gIGNvbnN0IGNhcmRMaWtlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19saWtlLWJ0blwiKTtcclxuICBjb25zdCBjYXJkRGVsZXRlQnV0dG9uID0gY2FyZEVsZW1lbnQucXVlcnlTZWxlY3RvcihcIi5jYXJkX19kZWxldGUtYnRuXCIpO1xyXG5cclxuICBpZiAoY2FyZElzTGlrZWQoZGF0YSkpIHtcclxuICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC5hZGQoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcclxuICB9XHJcblxyXG4gIGNhcmROYW1lRWwudGV4dENvbnRlbnQgPSBkYXRhLm5hbWU7XHJcbiAgY2FyZEltYWdlRWwuc3JjID0gZGF0YS5saW5rO1xyXG4gIGNhcmRJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcclxuXHJcbiAgY2FyZEltYWdlRWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICAgIG9wZW5Nb2RhbChwcmV2aWV3TW9kYWwpO1xyXG4gICAgcHJldmlld01vZGFsSW1hZ2VFbC5zcmMgPSBkYXRhLmxpbms7XHJcbiAgICBwcmV2aWV3TW9kYWxJbWFnZUVsLmFsdCA9IGRhdGEubmFtZTtcclxuICAgIHByZXZpZXdNb2RhbENhcHRpb25FbC50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICB9KTtcclxuXHJcbiAgY2FyZExpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldnQpID0+XHJcbiAgICBoYW5kbGVDYXJkTGlrZShldnQsIGNhcmRMaWtlQnV0dG9uLCBkYXRhLl9pZClcclxuICApO1xyXG5cclxuICBjYXJkRGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PlxyXG4gICAgaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgZGF0YS5faWQpXHJcbiAgKTtcclxuXHJcbiAgcmV0dXJuIGNhcmRFbGVtZW50O1xyXG59XHJcblxyXG5mdW5jdGlvbiBjYXJkSXNMaWtlZChkYXRhKSB7XHJcbiAgcmV0dXJuIGRhdGEuaXNMaWtlZDtcclxufVxyXG5cclxuZnVuY3Rpb24gb3Blbk1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBjbG9zZU1vZGFsKG1vZGFsKSB7XHJcbiAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcIm1vZGFsX29wZW5lZFwiKTtcclxuICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCBoYW5kbGVFc2NhcGVLZXkpO1xyXG59XHJcblxyXG5mdW5jdGlvbiBoYW5kbGVDYXJkTGlrZShldnQsIGNhcmRMaWtlQnV0dG9uLCBjYXJkSWQpIHtcclxuICBjb25zdCBpc0xpa2VkID0gY2FyZExpa2VCdXR0b24uY2xhc3NMaXN0LmNvbnRhaW5zKFwiY2FyZF9fbGlrZS1idG5fbGlrZWRcIik7XHJcblxyXG4gIGFwaVxyXG4gICAgLmNoYW5nZUxpa2VTdGF0dXMoY2FyZElkLCBpc0xpa2VkKVxyXG4gICAgLnRoZW4oKHVwZGF0ZWRDYXJkKSA9PiB7XHJcbiAgICAgIGNhcmRMaWtlQnV0dG9uLmNsYXNzTGlzdC50b2dnbGUoXCJjYXJkX19saWtlLWJ0bl9saWtlZFwiKTtcclxuXHJcbiAgICAgIHJldHVybiB1cGRhdGVkQ2FyZC5pc0xpa2VkO1xyXG4gICAgfSlcclxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XHJcbiAgICAgIGNvbnNvbGUubG9nKGVycik7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRXNjYXBlS2V5KGV2dCkge1xyXG4gIGlmIChldnQua2V5ID09PSBcIkVzY2FwZVwiKSB7XHJcbiAgICBjb25zdCBvcGVuZWRNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfb3BlbmVkXCIpO1xyXG4gICAgaWYgKG9wZW5lZE1vZGFsKSB7XHJcbiAgICAgIGNsb3NlTW9kYWwob3BlbmVkTW9kYWwpO1xyXG4gICAgfVxyXG4gIH1cclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRWRpdEZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcclxuICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG4gIGFwaVxyXG4gICAgLmVkaXRVc2VySW5mbyh7XHJcbiAgICAgIG5hbWU6IGVkaXRQcm9maWxlTW9kYWxOYW1lSW5wdXQudmFsdWUsXHJcbiAgICAgIGFib3V0OiBlZGl0UHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSxcclxuICAgIH0pXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBwcm9maWxlTmFtZS50ZXh0Q29udGVudCA9IGRhdGEubmFtZTtcclxuICAgICAgcHJvZmlsZURlc2NyaXB0aW9uLnRleHRDb250ZW50ID0gZGF0YS5hYm91dDtcclxuICAgICAgY2xvc2VNb2RhbChlZGl0UHJvZmlsZU1vZGFsKTtcclxuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG4gICAgICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlQWRkQ2FyZFN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBzdWJtaXRCdG4gPSBldnQuc3VibWl0dGVyO1xyXG4gIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2aW5nLi4uXCI7XHJcbiAgYXBpXHJcbiAgICAuYWRkTmV3Q2FyZCh7XHJcbiAgICAgIG5hbWU6IGNhcmRNb2RhbE5hbWVJbnB1dC52YWx1ZSxcclxuICAgICAgbGluazogY2FyZE1vZGFsTGlua0lucHV0LnZhbHVlLFxyXG4gICAgfSlcclxuICAgIC50aGVuKChkYXRhKSA9PiB7XHJcbiAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZ2V0Q2FyZEVsZW1lbnQoZGF0YSk7XHJcbiAgICAgIGNhcmRzTGlzdC5wcmVwZW5kKGNhcmRFbGVtZW50KTtcclxuICAgICAgY2xvc2VNb2RhbChlZGl0Q2FyZE1vZGFsKTtcclxuICAgICAgZXZ0LnRhcmdldC5yZXNldCgpO1xyXG4gICAgICBkaXNhYmxlQnV0dG9uKGNhcmRTdWJtaXRCdG4sIHNldHRpbmdzKTtcclxuICAgIH0pXHJcbiAgICAuY2F0Y2goKGVycikgPT4ge1xyXG4gICAgICBjb25zb2xlLmxvZyhlcnIpO1xyXG4gICAgfSlcclxuICAgIC5maW5hbGx5KCgpID0+IHtcclxuICAgICAgc3VibWl0QnRuLnRleHRDb250ZW50ID0gXCJTYXZlXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZFN1Ym1pdChldnQpIHtcclxuICBldnQucHJldmVudERlZmF1bHQoKTtcclxuICBjb25zdCBzdWJtaXRCdG4gPSBldnQuc3VibWl0dGVyO1xyXG4gIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRpbmcuLi5cIjtcclxuXHJcbiAgYXBpXHJcbiAgICAuZGVsZXRlQ2FyZChzZWxlY3RlZENhcmRJZClcclxuICAgIC50aGVuKCgpID0+IHtcclxuICAgICAgc2VsZWN0ZWRDYXJkLnJlbW92ZSgpO1xyXG4gICAgICBjbG9zZU1vZGFsKGRlbGV0ZUNhcmRNb2RhbCk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiRGVsZXRlXCI7XHJcbiAgICB9KTtcclxufVxyXG5cclxuZnVuY3Rpb24gaGFuZGxlRGVsZXRlQ2FyZChjYXJkRWxlbWVudCwgY2FyZElkKSB7XHJcbiAgc2VsZWN0ZWRDYXJkID0gY2FyZEVsZW1lbnQ7XHJcbiAgc2VsZWN0ZWRDYXJkSWQgPSBjYXJkSWQ7XHJcbiAgb3Blbk1vZGFsKGRlbGV0ZUNhcmRNb2RhbCk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQoZXZ0KSB7XHJcbiAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgY29uc3Qgc3VibWl0QnRuID0gZXZ0LnN1Ym1pdHRlcjtcclxuICBzdWJtaXRCdG4udGV4dENvbnRlbnQgPSBcIlNhdmluZy4uLlwiO1xyXG5cclxuICBhcGlcclxuICAgIC5lZGl0QXZhdGFyKHtcclxuICAgICAgYXZhdGFyOiBhdmF0YXJJbnB1dC52YWx1ZSxcclxuICAgIH0pXHJcbiAgICAudGhlbigoZGF0YSkgPT4ge1xyXG4gICAgICBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVfX3BpY3R1cmVcIikuc3JjID0gZGF0YS5hdmF0YXI7XHJcbiAgICAgIGNsb3NlTW9kYWwoYXZhdGFyTW9kYWwpO1xyXG4gICAgICBldnQudGFyZ2V0LnJlc2V0KCk7XHJcbiAgICAgIGRpc2FibGVCdXR0b24oYXZhdGFyU3VibWl0QnRuLCBzZXR0aW5ncyk7XHJcbiAgICB9KVxyXG4gICAgLmNhdGNoKChlcnIpID0+IHtcclxuICAgICAgY29uc29sZS5sb2coZXJyKTtcclxuICAgIH0pXHJcbiAgICAuZmluYWxseSgoKSA9PiB7XHJcbiAgICAgIHN1Ym1pdEJ0bi50ZXh0Q29udGVudCA9IFwiU2F2ZVwiO1xyXG4gICAgfSk7XHJcbn1cclxuXHJcbnByb2ZpbGVFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKGVkaXRQcm9maWxlTW9kYWwpO1xyXG4gIGVkaXRQcm9maWxlTW9kYWxOYW1lSW5wdXQudmFsdWUgPSBwcm9maWxlTmFtZS50ZXh0Q29udGVudDtcclxuICBlZGl0UHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dC52YWx1ZSA9IHByb2ZpbGVEZXNjcmlwdGlvbi50ZXh0Q29udGVudDtcclxuICByZXNldFZhbGlkYXRpb24oXHJcbiAgICBlZGl0UHJvZmlsZU1vZGFsLFxyXG4gICAgW2VkaXRQcm9maWxlTW9kYWxOYW1lSW5wdXQsIGVkaXRQcm9maWxlTW9kYWxEZXNjcmlwdGlvbklucHV0XSxcclxuICAgIHNldHRpbmdzXHJcbiAgKTtcclxufSk7XHJcblxyXG5wcm9maWxlRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZWRpdFByb2ZpbGVNb2RhbCk7XHJcbn0pO1xyXG5cclxuY2FyZEFkZEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIG9wZW5Nb2RhbChlZGl0Q2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5jYXJkRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZWRpdENhcmRNb2RhbCk7XHJcbn0pO1xyXG5cclxucHJldmlld01vZGFsRXhpdEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwocHJldmlld01vZGFsKTtcclxufSk7XHJcblxyXG5hdmF0YXJFZGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgb3Blbk1vZGFsKGF2YXRhck1vZGFsKTtcclxufSk7XHJcblxyXG5hdmF0YXJFeGl0QnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XHJcbiAgY2xvc2VNb2RhbChhdmF0YXJNb2RhbCk7XHJcbn0pO1xyXG5cclxuZGVsZXRlQ2FyZEV4aXRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcclxuICBjbG9zZU1vZGFsKGRlbGV0ZUNhcmRNb2RhbCk7XHJcbn0pO1xyXG5cclxuZGVsZXRlQ2FyZENhbmNlbEJ1dHRvbi5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xyXG4gIGNsb3NlTW9kYWwoZGVsZXRlQ2FyZE1vZGFsKTtcclxufSk7XHJcblxyXG5lZGl0Rm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVFZGl0Rm9ybVN1Ym1pdCk7XHJcbmNhcmRGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUFkZENhcmRTdWJtaXQpO1xyXG5hdmF0YXJGb3JtRWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIGhhbmRsZUF2YXRhckZvcm1TdWJtaXQpO1xyXG5kZWxldGVDYXJkRm9ybUVsZW1lbnQuYWRkRXZlbnRMaXN0ZW5lcihcInN1Ym1pdFwiLCBoYW5kbGVEZWxldGVDYXJkU3VibWl0KTtcclxuXHJcbltcclxuICBlZGl0UHJvZmlsZU1vZGFsLFxyXG4gIGVkaXRDYXJkTW9kYWwsXHJcbiAgcHJldmlld01vZGFsLFxyXG4gIGRlbGV0ZUNhcmRNb2RhbCxcclxuICBhdmF0YXJNb2RhbCxcclxuXS5mb3JFYWNoKChtb2RhbCkgPT4ge1xyXG4gIG1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZ0KSA9PiB7XHJcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJtb2RhbFwiKSkge1xyXG4gICAgICBjbG9zZU1vZGFsKG1vZGFsKTtcclxuICAgIH1cclxuICB9KTtcclxufSk7XHJcblxyXG5lbmFibGVWYWxpZGF0aW9uKHNldHRpbmdzKTtcclxuIl0sIm5hbWVzIjpbIl9fd2VicGFja19yZXF1aXJlX18iLCJzZXR0aW5ncyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiaGlkZUlucHV0RXJyb3IiLCJmb3JtRWwiLCJpbnB1dEVsIiwiY29uZmlnIiwicXVlcnlTZWxlY3RvciIsImlkIiwidGV4dENvbnRlbnQiLCJjbGFzc0xpc3QiLCJyZW1vdmUiLCJ0b2dnbGVCdXR0b25TdGF0ZSIsImlucHV0TGlzdCIsImJ1dHRvbkVsZW1lbnQiLCJzb21lIiwidmFsaWRpdHkiLCJ2YWxpZCIsImhhc0ludmFsaWRJbnB1dCIsImRpc2FibGVCdXR0b24iLCJkaXNhYmxlZCIsImFkZCIsImRvY3VtZW50Iiwic3JjIiwibG9nbyIsInBlbmNpbCIsInBsdXMiLCJwcm9maWxlRWRpdEJ1dHRvbiIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwiY2FyZEFkZEJ1dHRvbiIsImVkaXRQcm9maWxlTW9kYWwiLCJwcm9maWxlRXhpdEJ1dHRvbiIsImVkaXRGb3JtRWxlbWVudCIsImVkaXRQcm9maWxlTW9kYWxOYW1lSW5wdXQiLCJlZGl0UHJvZmlsZU1vZGFsRGVzY3JpcHRpb25JbnB1dCIsImNhcmRNb2RhbExpbmtJbnB1dCIsImNhcmRNb2RhbE5hbWVJbnB1dCIsImF2YXRhck1vZGFsIiwiYXZhdGFyRWRpdEJ1dHRvbiIsImF2YXRhckV4aXRCdXR0b24iLCJhdmF0YXJGb3JtRWxlbWVudCIsImF2YXRhcklucHV0IiwiYXZhdGFyU3VibWl0QnRuIiwiZGVsZXRlQ2FyZE1vZGFsIiwiZGVsZXRlQ2FyZEZvcm1FbGVtZW50IiwiZGVsZXRlQ2FyZEV4aXRCdXR0b24iLCJkZWxldGVDYXJkQ2FuY2VsQnV0dG9uIiwicHJldmlld01vZGFsIiwicHJldmlld01vZGFsSW1hZ2VFbCIsInByZXZpZXdNb2RhbENhcHRpb25FbCIsImVkaXRDYXJkTW9kYWwiLCJjYXJkRXhpdEJ1dHRvbiIsImNhcmRGb3JtRWxlbWVudCIsInByZXZpZXdNb2RhbEV4aXRCdXR0b24iLCJjYXJkU3VibWl0QnRuIiwiY2FyZFRlbXBsYXRlIiwiY2FyZHNMaXN0Iiwic2VsZWN0ZWRDYXJkIiwic2VsZWN0ZWRDYXJkSWQiLCJhcGkiLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJiYXNlVXJsIiwiaGVhZGVycyIsInRoaXMiLCJfYmFzZVVybCIsIl9oZWFkZXJzIiwiX2NoZWNrUmVzcG9uc2UiLCJyZXMiLCJvayIsImpzb24iLCJQcm9taXNlIiwicmVqZWN0Iiwic3RhdHVzIiwiZ2V0Q2FyZHNBbmRVc2VySW5mbyIsImFsbCIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJJbmZvIiwiZmV0Y2giLCJ0aGVuIiwiZWRpdFVzZXJJbmZvIiwiX3JlZjIiLCJuYW1lIiwiYWJvdXQiLCJtZXRob2QiLCJib2R5IiwiSlNPTiIsInN0cmluZ2lmeSIsImFkZE5ld0NhcmQiLCJfcmVmMyIsImxpbmsiLCJkZWxldGVDYXJkIiwiZWRpdEF2YXRhciIsIl9yZWY0IiwiYXZhdGFyIiwiY2hhbmdlTGlrZVN0YXR1cyIsImlzTGlrZWQiLCJhdXRob3JpemF0aW9uIiwiZ2V0Q2FyZEVsZW1lbnQiLCJkYXRhIiwiY2FyZEVsZW1lbnQiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiY2FyZE5hbWVFbCIsImNhcmRJbWFnZUVsIiwiY2FyZExpa2VCdXR0b24iLCJjYXJkRGVsZXRlQnV0dG9uIiwiY2FyZElzTGlrZWQiLCJhbHQiLCJhZGRFdmVudExpc3RlbmVyIiwib3Blbk1vZGFsIiwiZXZ0IiwiY2FyZElkIiwiY29udGFpbnMiLCJ1cGRhdGVkQ2FyZCIsInRvZ2dsZSIsImNhdGNoIiwiZXJyIiwiY29uc29sZSIsImxvZyIsImhhbmRsZUNhcmRMaWtlIiwiX2lkIiwiaGFuZGxlRGVsZXRlQ2FyZCIsIm1vZGFsIiwiaGFuZGxlRXNjYXBlS2V5IiwiY2xvc2VNb2RhbCIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJrZXkiLCJvcGVuZWRNb2RhbCIsImNhcmRzIiwidXNlckluZm8iLCJmb3JFYWNoIiwiaXRlbSIsInByZXBlbmQiLCJyZXNldFZhbGlkYXRpb24iLCJ2YWx1ZSIsImlucHV0IiwicHJldmVudERlZmF1bHQiLCJzdWJtaXRCdG4iLCJzdWJtaXR0ZXIiLCJ0YXJnZXQiLCJyZXNldCIsImZpbmFsbHkiLCJxdWVyeVNlbGVjdG9yQWxsIiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJBcnJheSIsImZyb20iLCJjaGVja0lucHV0VmFsaWRpdHkiLCJzaG93SW5wdXRFcnJvciIsImVycm9yTWVzc2FnZSIsInZhbGlkYXRpb25NZXNzYWdlIl0sInNvdXJjZVJvb3QiOiIifQ==